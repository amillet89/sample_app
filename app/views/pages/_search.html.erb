
<div class="center hero-unit">
    <h1> My little scraping tool: <br>
    
   	     <%= form_tag({:controller => "pages", :action => "search"}, :method => "get", remote: true) do %>
  			 <%= label_tag(:url, "Enter a url, for e.g. 'www.pinterest.com'") %>
 			 <%= text_field_tag(:url) %>
 			 <%= label_tag(:selector, "Enter a selector, for e.g. 'img'") %>
 			 <%= text_field_tag(:selector) %>
 			 <%= submit_tag("Search") %>
		<% end %> 
    
    </h1>

 </div>

<%
  require 'rubygems'
  require 'nokogiri'
  require 'open-uri'
 
  url = @url
  
  
  if url[0].downcase == 'w'
  	url[0,0] = "http://"
  end
  
  doc = Nokogiri::HTML(open(url))
  
  select = @selector
  content = doc.css(select)
  %>
  <div> <h2> Scraped content:</h2> <br> <%= raw content %>  </div>